{% extends "base.html" %}
{% block title %}Usuarios{% endblock %}
{% block menu.usuarios %}active{% endblock %}
{% block page.header %}Usuarios{% endblock %}
{% block page.content %}
<div class="col-xs-12">
{% if users %}
<div class="box">
	<div class="box-header">
 
{% if groups and is_admin or request.user.is_superuser %}

     <div class="input-group-btn">
      <button aria-expanded="false" type="button" class="btn btn-primary dropdown-toggle " data-toggle="dropdown">Crear
        <span class="fa fa-caret-down"></span>
      </button>
      <ul class="dropdown-menu" style="float:right">
        {% for group in groups %}
        <li><a href="nuevo/{{ group.name }}">{{ group.name|capfirst }}</a></li>
        {% endfor %}
      </ul>
      </div>
  

{% endif %}

  </div>
	<div class="box-body">
    <table id="example1" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Nombre de Usuario</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Rol</th>
          <th>Última Sesión</th>
          <th>Cuenta</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td><a href="ver/{{ user.id }}">{{ user.username }}</a></td>
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.groups.all.0|capfirst }}</td>
            <td>{{ user.last_login|date:"d M Y" }}</td>
            <td>{% if user.is_active == True %}<i class="fa fa-circle text-success"></i> Habilitada{% else %}<i class="fa fa-circle text-danger"></i> Suspendida{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
{% if groups %}
<div class="register-box">
  <div class="register-box-body">
      <p class="login-box-msg">Aún no hay usuarios en el sistema<br>Sólo los usuarios pueden generar traducciones</p>
      <p></p>
     <div class="input-group-btn">
      <button aria-expanded="false" type="button" class="btn btn-primary dropdown-toggle btn-block" data-toggle="dropdown">Crear
        <span class="fa fa-caret-down"></span>
      </button>
      <ul class="dropdown-menu">
        {% for group in groups %}
        <li><a href="nuevo/{{ group.name }}">{{ group.name|capfirst }}</a></li>
        {% endfor %}
      </ul>
      </div>
    </div>
</div>
{% endif %}
{% endif %}
</div>
{% endblock %}
{% block aditional.css %}<link rel="stylesheet" href="/static/js/plugins/datatables/dataTables.bootstrap.css">{% endblock %}
{% block aditional.js %}
<script src="/static/js/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/js/plugins/datatables/dataTables.bootstrap.min.js"></script>
<script>
  $(function () {
    $("#example1").DataTable();
    $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
    });
  });
</script>
{% endblock %}